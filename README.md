# ­­Тестовое техническое задание

1. Цель технического задания

Показать знания в разработке ios приложений, посредством написания тестового мобильного приложения.

1. Основные требования к разработке

- Проект на Swift 5, верстка кодом uikit или swiftui, не используя storyboard, только iphone и портретная ориентация экрана.
- Шрифт Roboto ([https://fonts.google.com/specimen/Roboto](https://fonts.google.com/specimen/Roboto)), иконки любые.
- Вёрстка по своему усмотрению.
- Использовать Наше API ([https://plannerok.ru/docs#/)](https://plannerok.ru/docs#/).
- Использование JWT ([https://jwt.io/)](https://jwt.io/).
- Обработка ошибок и состояние загрузки.
- Можно использовать любые сторонние библиотеки.
- Приветствуются дополнения, не описанные в задании.
- Проект опубликовать на GitHub, качественное ведение git.

1. Структура проекта

Экраны:

1. Авторизация.
  1. Номер телефона.
  2. Код подтверждения СМС.
2. Регистрация.
3. Чаты. (Только верстка самого простого чата, без функционала)
  1. Чат. (Только верстка самого простого чата, без функционала)
4. Профиль.
  1. Редактирование профиля.

1. Запросы

Все запросы кроме [/api/v1/users/register/](https://plannerok.ru/docs#/), [/api/v1/users/send-auth-code/](https://plannerok.ru/docs#/), [/api/v1/users/check-auth-code/](https://plannerok.ru/docs#/), должны содержать значение заголовка авторизации с помощью токена доступа (value: "Bearer accesstoken", forHTTPHeaderField: "Authorization"). Accesstoken (время жизни 10 минут) полученный при регистрации или авторизации профиля. По истечение 10 минут accesstoken будет недействителен, ответ запроса будет 401, Вам следует сделать refreshtoken, запросом POST - [/api/v1/users/refresh-token/](https://plannerok.ru/docs#/) и повторить предыдущий запрос. Не забывайте, что одновременно может быть более одного запроса.

1. Требования к экрану «Авторизация»

- Ввод номера телефона с маской, флагом и кодом страны. Страну можно выбрать, вручную кликнув по флагу или ввести код страны. Должен быть placeholder. Дефолтное значение: currentRegion.
- Отправка номера телефона (phone: String) запросом POST - [/api/v1/users/send-auth-code/](https://plannerok.ru/docs#/), пример номера телефона: +79219999999.
- При удачном запросе, пользователь должен ввести код подтверждения, смс не придет, для теста используем код: 133337. Ввод кода подтверждения должен состоять из 6 символов, только цифры.
- Отправкаданных (phone: String, code: String) запросомPOST - [/api/v1/users/check-auth-code/](https://plannerok.ru/docs#/).
- ПриудачномзапросеВыполучите refresh token, access token, user id, is user exists.
- Если isuserexists == true, авторизуем пользователя, либо отправляем на регистрацию.
- Незабудьтесохранить refresh token, access token.

1. Требование к экрану «Регистрация»

- Показывать номер телефона, без возможности редактирования.
- Ввод имени пользователя.
- Ввод username пользователя:
  - Заглавные латинские буквы: от A до Z (26 символов)
  - Строчные латинские буквы: от a до z (26 символов)
  - Цифры от 0 до 9 (10 символов)
  - Символы: -\_ (2 символа)
- Отправкаданных (phone: String, name: String, username: String) запросомPOST - [/api/v1/users/register/](https://plannerok.ru/docs#/).
- При удачном запросе Вы получите refreshtoken, accesstoken, userid.
- Авторизуем пользователя, либо выдаем toast с ошибкой.
- Незабудьтесохранить refresh token, access token.

1. Требование к экрану «Чаты»

- Вёрстка по своему усмотрению, должна содержать список чатов.

1. Требование к экрану «Чата с сообщениями»

- Вёрстка по своему усмотрению, должна содержать список сообщений и TextField прикреплена к нижней части экрана и кнопки отправить (Эта панель должна быть всегда видна). При нажатии на TextField открывать клавиатуру, панель с TextField и кнопкой отправки прикреплена к вверху клавиатуры. Клавиатура должна быть interactively.

1. Требование к экрану «Профиль»

- Должен содержать аватарку пользователя, номер телефона, никнейм, город проживания, дату рождения, знак зодиака по дате рождения, о себе.
- Все данные пользователя можно получить запросом GET - [/api/v1/users/me/](https://plannerok.ru/docs#/).
- Данные пользователя храним на устройстве, чтобы не делать повторных запросов.

1. Требования к экрану «Редактировать профиль»

- Изменение всех данных, кроме phone и username.
- Изменение аватарки или добавление новой.
- Сохраняем новые данные на устройстве и отправляем на сервер.
- Отправка данных запросом PUT - [/api/v1/users/me/](https://plannerok.ru/docs#/).
- Данные аватарки: название файла и сам файл base 64.

1. Стилевое оформление

Стиль оформления по своему желанию.